<!DOCTYPE html>
<html lang="en">
<head><title>snake test</title></head><body>

<h1>Testing Snake</h1>

<script src="snake.js">
</script>
<pre>

<script>

const snakeOk = [];
//  before start, snake is in start position
snakeOk.push(pairEq(snake[0]) (Pair(10)(5)));
snakeOk.push(pairEq
    (pairPlus(Position(1)(5))(Position(3)(1)))
    (Position(4)(6))
);

const inBounds1 = x => {
    if (x < 0)   { return 20 - 1 }
    if (x > 20) { return 0 }
    return x
};

snakeOk.push(pairEq(
    pairMap(Position(2)(3)) (inBounds1)
    )(
        Position(2)(3)
    )
);




//  after one step, snake has moved up
nextBoard();
snakeOk.push(pairEq(snake[0]) (Pair(10)(4)));

//  before eating food, snake is of size 4
    snakeOk.push(snake.length === 4);

//  after eating food, snake has grown in size
    food = Pair(10)(3);
    nextBoard();
    snakeOk.push(snake.length === 5);

//  current direction is north
    snakeOk.push(direction === north);

//  when I go clockwise, I end up east
    changeDirection(clockwise);
    snakeOk.push(direction === east);

//  going counterclockwise, we end up north again
    changeDirection(countercw);
    snakeOk.push(direction === north);

// test result report
if ( snakeOk.every(elem => elem) ) {
    document.writeln("All " + snakeOk.length + " tests ok.");
} else {
    document.writeln("Not all tests ok! Details:");
    for (let i = 0; i < snakeOk.length; i++) {
        if(snakeOk[i]) {
            document.writeln("Test "+ i +" ok");
        } else {
            document.writeln("Test "+ i +" failed");
        }
    }
}

</script>

</pre>
</body>
</html>
